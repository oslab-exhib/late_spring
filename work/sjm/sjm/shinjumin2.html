<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>flower</title>

	<style type="text/css">
		/*
        @font-face {
            font-family: 'NEXON Lv2 Gothic Bold';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-04@2.1/NEXON Lv2 Gothic Bold.woff') format('woff');
            font-weight: normal;
            font-style: normal;
            
*/
		@font-face {
			font-family: 'IBMPlexSansKR-Light';
			src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_20-07@1.0/IBMPlexSansKR-Light.woff') format('woff');
			font-weight: normal;
			font-style: normal;
		}
		}

	</style>
</head>

<body onclick="onClickScreen()">
	<canvas style="border:1px solid #d3d3d3;"></canvas>
	<script>
		const COLORS = [{
				r1: 1,
				g1: 3,
				b1: 79,
				r2: 0,
				g2: 83,
				b2: 199
			},
			{
				r1: 0,
				g1: 83,
				b1: 199,
				r2: 0,
				g2: 83,
				b2: 199
			},
			{
				r1: 131,
				g1: 193,
				b1: 12,
				r2: 20,
				g2: 154,
				b2: 119
			},
			{
				r1: 20,
				g1: 154,
				b1: 119,
				r2: 20,
				g2: 154,
				b2: 119
			},
			{
				r1: 242,
				g1: 202,
				b1: 9,
				r2: 252,
				g2: 167,
				b2: 18
			},
			{
				r1: 252,
				g1: 167,
				b1: 18,
				r2: 252,
				g2: 167,
				b2: 18
			},
			{
				r1: 255,
				g1: 143,
				b1: 34,
				r2: 249,
				g2: 54,
				b2: 94
			}, {
				r1: 249,
				g1: 54,
				b1: 94,
				r2: 249,
				g2: 54,
				b2: 94
			},
		];

		const TEXTS = [
			"지나가버린",
			"봄",
			"가능성",
			"회상",
			"코로나",
			"만춘",
		];

		var canvas = document.getElementsByTagName('canvas')[0];
		canvas.width = window.innerWidth;
		canvas.height = window.innerHeight;
		var c = canvas.getContext('2d');
		c.imageSmoothingEnabled = true;

		c.globalCompositeOperation = 'lighter';
		//두개 합치면 흰색

		var cancelMe = "";

		var container = {
			x: 0,
			y: 0,
			width: window.innerWidth,
			height: window.innerHeight
		};

		var circles = [];
		var words = [];

		requestAnimationFrame(draw);

		function draw() {
			c.clearRect(container.x, container.y, container.width, container.height);

			var grd = c.createRadialGradient(canvas.width / 2, canvas.height / 2, 10, canvas.width / 2, canvas.height / 2, canvas.width / 2);

			//canvas.width/2  원의 그라디언트 너비 
			grd.addColorStop(0, `rgba(51,51,51,1)`);
			grd.addColorStop(1, `rgba(2,0,0,1)`);

			//배경색 
			c.fillStyle = grd;
			c.fillRect(container.x, container.y, container.width, container.height);
			//c.clearRect(container.x,container.y,container.width,container.height);
			//c.strokeRect(container.x,container.y,container.width,container.height);

			for (var i = 0; i < circles.length; i++) {
				var grd = c.createRadialGradient(circles[i].x, circles[i].y, 5, circles[i].x, circles[i].y,
					circles[i].r);
				grd.addColorStop(0,
					`rgba(${circles[i].colorR1},${circles[i].colorG1}, ${circles[i].colorB1}, 0)`);
				grd.addColorStop(0.999,
					`rgba(${circles[i].colorR2},${circles[i].colorG2}, ${circles[i].colorB2}, 1)`);
				grd.addColorStop(1, `rgba(${circles[i].colorR2},${circles[i].colorG2}, ${circles[i].colorB2}, 0)`);
				//끝으로 갈수록 오퍼시티 
				//색이 증발 

				//				c.beginPath();
				//				c.arc(circles[i].x, circles[i].y, circles[i].r, 0, 2 * Math.PI, false);
				c.fillStyle = grd;

				c.save();
							c.translate(circles[i].x, circles[i].y);
				c.scale(circles[i].r, circles[i].r);
				c.beginPath();
				c.moveTo(0.7, 0.3);
				c.bezierCurveTo(0.8, 0.2, 0.9, 0.2, 0.8, 0.1);
				c.bezierCurveTo(0.8, 0.1, 0.7, 0.2, 0.5, 0.3);
				c.bezierCurveTo(0.5, 0.1, 0.4, -0.0, 0.4, 0.0);
				c.bezierCurveTo(0.3, 0.0, 0.3, 0.1, 0.3, 0.2);
				c.bezierCurveTo(0.2, 0.1, 0.2, 0.1, 0.1, 0.1);
				c.bezierCurveTo(0.1, 0.2, 0.2, 0.3, 0.3, 0.4);
				c.bezierCurveTo(0.1, 0.5, -0.0, 0.6, 0.0, 0.6);
				c.bezierCurveTo(0.0, 0.6, 0.1, 0.7, 0.2, 0.6);
				c.bezierCurveTo(0.1, 0.7, 0.1, 0.8, 0.1, 0.8);
				c.bezierCurveTo(0.2, 0.9, 0.3, 0.8, 0.4, 0.7);
				c.bezierCurveTo(0.5, 0.8, 0.6, 1.0, 0.6, 1.0);
				c.bezierCurveTo(0.6, 1.0, 0.7, 0.9, 0.6, 0.7);
				c.bezierCurveTo(0.7, 0.8, 0.8, 0.9, 0.8, 0.8);
				c.bezierCurveTo(0.9, 0.8, 0.8, 0.7, 0.7, 0.5);
				c.bezierCurveTo(0.8, 0.5, 1.0, 0.4, 1.0, 0.4);
				c.bezierCurveTo(1.0, 0.3, 0.9, 0.3, 0.7, 0.3);
				c.closePath();
				c.fill();
				c.restore();


				c.restore();
				c.fill();


				//								c.fillStyle = grd;
				//								c.beginPath();
				//								c.arc(circles[i].x, circles[i].y, circles[i].r, 0, 2 * Math.PI, false);
				//								c.fill();


				//원 선언 

				if ((circles[i].x + circles[i].vx + circles[i].r > container.x + container.width) || (
						circles[i].x - circles[i].r + circles[i].vx < container.x)) {
					circles[i].vx = -0.5 * circles[i].vx;
				}
				if ((circles[i].y + circles[i].vy + circles[i].r > container.y + container.height) || (
						circles[i].y - circles[i].r + circles[i].vy < container.y)) {
					circles[i].vy = -0.5 * circles[i].vy;
				}
				circles[i].x += circles[i].vx;
				circles[i].y += circles[i].vy;
			}

			for (var i = 0; i < words.length; i++) {
				c.fillStyle = "white";
				c.font = "20px IBMPlexSansKR-Light";

				c.fillText(words[i].text, words[i].x, words[i].y);

				if ((words[i].x + words[i].vx + words[i].r > container.x + container.width) || (
						words[i].x - words[i].r + words[i].vx < container.x)) {
					words[i].vx = -0.5 * words[i].vx;
				}
				if ((words[i].y + words[i].vy + words[i].r > container.y + container.height) || (
						words[i].y - words[i].r + words[i].vy < container.y)) {
					words[i].vy = -0.5 * words[i].vy;
				}
				words[i].x += words[i].vx;
				words[i].y += words[i].vy;
			}

			//c.strokeStyle = 'black';
			cancelMe = requestAnimationFrame(draw);
		}

		function addCircle() {
			var colorIndex = Math.round((COLORS.length - 1) * Math.random());
			var circle = {
				x: Math.random() * canvas.width-100,
				y: Math.random() * canvas.height-100,
				r: 100 + 50 * Math.random(),
				colorR1: COLORS[colorIndex].r1,
				colorG1: COLORS[colorIndex].g1,
				colorB1: COLORS[colorIndex].b1,
				colorR2: COLORS[colorIndex].r2,
				colorG2: COLORS[colorIndex].g2,
				colorB2: COLORS[colorIndex].b2,
				vx: 10 * Math.random(),
				vy: 10 * Math.random()
			}

			circles.push(circle);
		}

		function addWord() {
			var index = Math.round(Math.random() * (TEXTS.length - 1));

			var word = {
				r: 10,
				text: TEXTS[index],
				x: Math.random() * canvas.width,
				y: Math.random() * canvas.height,
				vx: 10 * Math.random(),
				vy: 10 * Math.random(),
			}

			words.push(word);
		}

		function removeCircle() {
			circles.pop();
		}

		function onClickScreen() {
			addCircle();
			addWord();
		}

	</script>
</body>

</html>
